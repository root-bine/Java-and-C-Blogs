# HashSet集合

## 1、<span style="color:brown">HashSet集合：</span>

**1.1、概述：**

java.util.HashSet集合   implements    Set接口

**1.2、特点：**

1. 元素没有索引值；

2. 元素不能出现重复；
3. 元素在集合中是无序的，存储和取出的顺序可能不一致；
4. <span style="color:violet">**底层为“哈希表”结构（查询速度快）**</span>；

## 2、<span style="color:brown">HashSet集合的方法：</span>

```java
public boolean add(E e)
```

```java
public boolean addAll(Collection<? super E> c)
```

```java
public boolean remove(E e)
```

```java
public boolean contains(E e)
```

```java
public boolean isEmpty()
```

```java
public int size()
```

```java
public Object[] toArray()
```

```java
public void clear()
```

## 3、<span style="color:brown">HashSet集合遍历方式：</span>

1. 增强for循环：

2. Iterator迭代器遍历：

   ```java
   import java.util.HashSet;
   import java.util.Iterator;
   import java.util.Set;
   public class SetDemo03 {
       public static void main(String[] args) {
           Set<Integer> set= new HashSet<>();
           set.add(1);
           set.add(2);
           set.add(3);
           set.add(5);
           System.out.println(set.contains(4));
           System.out.println(set.isEmpty());
           System.out.println(set.remove(5));
           Object[] array = set.toArray();
           for (Object obj:array) {
               System.out.print(obj+" ");
           }
           System.out.println();
           /**
            * 增强for循环
            */
           for (Integer i:set) {
               System.out.println(i);
           }
           System.out.println("----------------------");
           /**
            * Iterator迭代器
            */
           
           Iterator<Integer> iterator = set.iterator();
           while(iterator.hasNext()){
               Integer next = iterator.next();
               System.out.println(next);
           }
       }
   }
   ```

   ```apl
   false
   false
   true
   1 2 3 
   1
   2
   3
   ----------------------
   1
   2
   3
   ```

## 4、<span style="color:brown">哈希值</span>

**4.1、哈希值的定义：**

```apl
1.是一个十进制的整数，由系统随机给出;
2.本质上，哈希值就是对象的地址值，是逻辑地址，不是实际的物理地址;
```

**4.2、获取哈希值的方法：**

### native：表示该方法调用的是本地操作系统的方法！！

### Object是所有类的默认父类，因此类可以直接使用这个方法！！！

```java
public native int hashCode()
    1.java.lang.Object
    2.返回该对象的哈希值
    3.该方法如果被重写，则返回的哈希值是修改后的数值，不再由系统随机给出;
```

**4.3、代码演示：**

```java
public class HashSetDemo {
    public static void main(String[] args) {
        Person p1 = new Person();
        Person p2 = new Person();
        int code1 = p1.hashCode();
        int code2 = p2.hashCode();
        System.out.println(code1);//856419764
        System.out.println(code2);//621009875
        /**
         * toString()方法源码：
         *          return getClass().getName()+"@"+Integer.toHexString(hashCode());
         */
        System.out.println(p1);//practice.Person@330bedb4
        System.out.println(p2);//practice.Person@2503dbd3
        System.out.println(p1==p2);//false
        String s1 = new String("abc");
        String s2 = new String("abc");
        System.out.println(s1.hashCode());//96354
        System.out.println(s2.hashCode());//96354
        System.out.println("重地".hashCode());//1179395
        System.out.println("通话".hashCode());//1179395

    }
}
```

## 5、<span style="color:brown">HashSet集合存储数据的结构：</span>哈希表

**5.1、概述：**

- 组成：`哈希表的初始容量为16`

  ```apl
  1.jdk1.8之前，哈希表=数组+链表
  2.jdk1.8之后:
  		哈希表=数组+链表/红黑树
  ```

- 特点：`查询速度快`

**5.2、原理：**

1. 数组结构：

   ```apl
   把元素进行分组
   ```

2. **链表结构**与**红黑树结构**：

   ```apl
   把哈希值相同的元素放置在一起
   ```

   ![链表转换红黑树](https://raw.githubusercontent.com/root-bine/image/main/Typora-image/%E9%93%BE%E8%A1%A8%E8%BD%AC%E7%BA%A2%E9%BB%91%E6%A0%91.png)

**5.3、哈希冲突：**

![哈希冲突](https://raw.githubusercontent.com/root-bine/image/main/Typora-image/%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81.png)

## 6、<span style="color:brown">HashSet集合存储自定义类型元素：</span>

## <span style="color:violet">给HashSet集合存放自定义元素时，需要重写对象中的hashCode()、equals()方法！！！</span>

```java
public class Person {
    private String name;
    private int age;

    public Person() {
    }

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
    /**
      *重写hashCode()、equals()
      */
    @Override
    public boolean equals(Object o) {
        if (this == o) {
            return true;
        }
        if (o == null || getClass() != o.getClass()) {
            return false;
        }
        Person person = (Person) o;
        return age == person.age && Objects.equals(name, person.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}
```

```java
/**
 *保证同年龄、同名的人只存储一次
 */
public class HashSetDemo {
    public static void main(String[] args) {
        Person p1 = new Person("Java",205);
        Person p2 = new Person("Java",205);
        Person p3 = new Person("Java",150);
        HashSet<Person> set = new HashSet<>();
        set.add(p1);
        set.add(p2);
        set.add(p3);
        System.out.println(p1.hashCode());
        System.out.println(p2.hashCode());
        System.out.println(p3.hashCode());
        System.out.println(set);
    }
}
```

```apl
71347852
71347852
71347797
[Person{name='Java', age=150}, Person{name='Java', age=205}]
```


# 线程池详解

## 1、<span style="color:brown">线程池的接口：</span>ExecutorService

1. 线程池的<span style="color:violet">顶级接口</span>是：`java.util.concurrent.Executor`；
2. Executor严格意义上，是线程的执行工具；
3. 线程池的<span style="color:orange">真正接口</span>是：`java.util.concurrent.ExecutorService`；
4. `java.util.concurrent.Executors`工具类：线程池的工具类，用于创建线程池对象；

## 2、<span style="color:brown">创建并获取线程池对象：</span>

**2.1、创建线程池对象的方法：**`Executors工厂类`中的静态放法

```java
public static ExecutorService newFixedThreadPool(int nThreads)
    1.返回线程池对象;
	2.创建的是有界线程池;
    3.int nThreads：线程池中的线程个数可以指定最大值;
```

**2.2、获取线程池对象的方法：**`ExecutorService接口`中的方法

```java
public Future<?> submit(Runnable task)
    1.获取线程池中的某一对象，并执行;
	2.Future接口：用来记录线程执行完毕后的结果;
```

```java
public void shutdown()
    关闭销毁线程;
```

## 3、<span style="color:brown">线程池的使用步骤：</span>

1. 创建一个类，实现Runnable接口，重写run方法，定义线程任务；
2. 在main方法中，使用线程池的工厂类：Executors，创建一个生产指定线程数量的线程池；
3. 调用ExecutorService接口中的submit方法，传递线程任务，开启线程，执行run方法；

4. 调用ExecutorService接口中的shutdown方法，可以销毁线程池；

## 4、<span style="color:brown">案例实现：</span>

### 线程池一旦开启，就会一直保持这开启状态！一旦使用完线程，就会把线程归还给线程池，该线程从就可以继续使用！！

```java
public class Demo01 {
    public static void main(String[] args) {
        //此处设置了线程池中最多存在线程的数量
        ExecutorService es = Executors.newFixedThreadPool(2);
        es.submit(new RunnableImpl());//pool-1-thread-1线程创建成功
        es.submit(new RunnableImpl());//pool-1-thread-2线程创建成功
        es.submit(new RunnableImpl());//pool-1-thread-1线程创建成功
        //关闭线程池
        es.shutdown();
        /*此处由于线程池已经关闭，无法在继续执行线程任务*/
        es.submit(new RunnableImpl());//报错
    }
}
```
## 1、<span style="color:brown">工程创建：</span>

**1.1、创建方式：**

1️⃣打开`STM32CUBEMX`，选择`File->New Project`；

2️⃣在`STM32CUBEMX`首页的**New Project模块**，选择**对应的创建方式**；

**1.2、芯片选择：**

在`MCU/MPU Selector`，输入芯片型号：`STM32F03RC`，实验采用芯片采用封装方式为`LQFP`。

选择**对应的芯片**，点击`Start Project`，进入配置界面。



## 2、<span style="color:brown">时钟配置：</span>

**2.1、情况说明：**

✅实验芯片<u>**外接一个有源晶振**作为`HSE`，没有配置`LSE`的晶振</u>，因此**采用外部时钟**。

✔️`STM32CubeMX`启用外部时钟：`Pinout & Configuration -> System Core -> RCC`，**选择`LSE`和`HSE`的模式**。

**2.2、内部时钟：**

| LSI（内部低速时钟） | HSI（内部高速时钟） |
| :-----------------: | :-----------------: |

- `STM32 MCU`<span style="color:red">内部自带`RC`振荡电路</span>，其**内部时钟**就是**RC振荡器**产生的；

- <span style="color:blue">RC振荡器精度远低于晶振</span>，且**容易受到温度的影响**；

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_08.png" alt="image-20251110172414595" style="zoom:40%;" />

**2.3、外部时钟：**

| LSE（外部低速时钟） | HSE（外部高速时钟） |
| :-----------------: | :-----------------: |

一般有两种接法：

1. <u>外部接**有源**晶振</u>或<u>其他直接时钟输入源</u>：`BYPASS Clock Source`模式（旁路时钟源）

2. <u>外部接**无源**晶振</u>：`Crystal/Ceramic Resonator`模式（晶体/陶瓷晶振）

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_09.png" alt="image-20251110174011555" style="zoom:40%;" />



## 3、<span style="color:brown">烧录调试：</span>

> **此步骤非常重要**，不开启会导致烧录后，`Jlink`找不到`SWD`设备，<span style="color:red">记得每个工程都需要开启</span>

**3.1、常用DeBug接口：**

目前常用接口是`JTAG`和`SWD`：

- `SWD`（`Serial Wire Debug`）

  | VCC  | GND  | <span style="color:green">SWIO</span> | <span style="color:green">SWCLK</span> |
  | :--: | :--: | :-----------------------------------: | :------------------------------------: |

- `JTAG`（`Joint Test Action Group`）

  |                           VCC                           |                          GND                          | <span style="color:green">SWIO</span> | <span style="color:green">SWCLK</span> |
  | :-----------------------------------------------------: | :---------------------------------------------------: | :-----------------------------------: | :------------------------------------: |
  | <span style="color:blue">**TRACESWO**</span> (`4 pins`) | <span style="color:blue">**NJTEST**</span> (`5 pins`) |                                       |                                        |

**3.2、设置烧录模式：**

`STM32CubeMX`设置烧录模式：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_10.png" alt="image-20251110180149640" style="zoom:60%;" />



## 4、<span style="color:brown">工程配置：</span>

**4.1、Project Manager -> Project：**

| Project Name              | 工程名称                                                     |
| ------------------------- | ------------------------------------------------------------ |
| **Project Location**      | **工程目录存放位置**，可修改路径                             |
| **Application Structure** | **应用程序结构**：<br>        -`Basic`：<span style="color:red">基础的结构</span>，不包含中间件（RTOS、文件系统、USB设备等）<br/>	-`Advanced`：<span style="color:red">基础的结构 + 中间件</span>✅ |
| **Toolchain / IDE**       | **工具链+集成环境**，<span style="color:red">根据**编译软件**选择</span> |

**4.2、Project Manager -> Code Generator：**

| copy all used libraries into the project folder              | 复制所有库文件                                     |
| ------------------------------------------------------------ | -------------------------------------------------- |
| **Copy only the necessary library files**                    | **只复制必要的库文件**✅                            |
| **Add necessary library files as reference in the toolchain project configuration file** | **在工具链项目配置文件中添加必要的库文件作为引用** |

| Generate peripheral initialization as a pair of’.c/.h’ files per peripheral | 每个外设生成独立的.C .H文件✅          |
| ------------------------------------------------------------ | ------------------------------------- |
| **Backup previously generated files when re-generating**     | **在重新生成时备份以前生成的文件**    |
| **keep user code when re-generating**                        | **重新生成代码时，保留用户代码**✅     |
| **delete previously generated files when not re-generated**  | 删除以前生成但现在没有选择生成的文件✅ |


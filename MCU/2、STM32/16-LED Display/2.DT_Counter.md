## 1、<span style="color:brown">数码管计时器：</span>

1. 数码管**自动开始计数**，从`0 ~ 99`；
2. 按下Button：
   - 第一次Drop：数码管自动清零；
   - 第二次开始：Drop_01是暂停，Drop_02是清零；
3. MCU下电，重复上述步骤；



## 2、<span style="color:brown">工程代码：</span>

````c
"main.c -> main() Before"
#define ADDR_0 0xFE
#define ADDR_1 0xFD
uint8_t num[]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F};
uint16_t count = 0;
uint8_t flag = 0;
// 数码管功能
void hc595_send_byte(uint8_t byte) {
	for(int i=0; i<8; i++) {
		if(byte&0x80) {
			HAL_GPIO_WritePin(DS_GPIO_Port, DS_Pin, GPIO_PIN_SET);
		} else {
			HAL_GPIO_WritePin(DS_GPIO_Port, DS_Pin, GPIO_PIN_RESET);
		}
		HAL_GPIO_WritePin(SHCP_GPIO_Port, SHCP_Pin, GPIO_PIN_RESET);
		HAL_GPIO_WritePin(SHCP_GPIO_Port, SHCP_Pin, GPIO_PIN_SET);
		byte <<= 1;
	}
}
void hc595_send_data(uint8_t num, uint8_t addr) {
	hc595_send_byte(num);
	if(addr == 0) {
		hc595_send_byte(ADDR_0);
	} else if(addr == 1) {
		hc595_send_byte(ADDR_1);
	}
	HAL_GPIO_WritePin(STCP_GPIO_Port, STCP_Pin, GPIO_PIN_RESET);
	HAL_GPIO_WritePin(STCP_GPIO_Port, STCP_Pin, GPIO_PIN_SET);
}
"main.c -> main()":
// 初始化TIM6
HAL_TIM_Base_Start_IT(&htim6);
while (1) {
    hc595_send_data(num[count/1000], 0);
	hc595_send_data(num[(count/100)%10], 1);
}
"main.c -> main() After"
// TIM6中断服务函数
void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef * htim) {
	if(count <= 9900) {
		count++;
	}
}
// INT3中断服务函数
void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin){
	if(GPIO_Pin == KEY1_Pin) {
		if(HAL_GPIO_ReadPin(KEY1_GPIO_Port, KEY1_Pin) == GPIO_PIN_RESET) {
			if(flag == 0) {
				count = 0;
				HAL_TIM_Base_Start_IT(&htim6);
			} else {
				HAL_TIM_Base_Stop_IT(&htim6);
			}
		}
		flag = ~flag;
	}
}
````


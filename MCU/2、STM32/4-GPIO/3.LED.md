## 1、<span style="color:brown">工程设置：</span>

**1.1、原理图：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_LED01.png" alt="image-20251116140654401" style="zoom:50%;" />

`LED`接**上拉电阻**至`3.3V`，需要：

| 初始化时，电平为：`HIGH_LEVEL` | 点亮LED，电平为：`LOW_LEVEL` |
| ------------------------------ | ---------------------------- |

**1.2、CubeMX配置：**

在`STM32CubeMX`打开工程，找到对应的GPIO引脚，设置**引脚模式**：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_LED02.png" alt="image-20251116141052688" style="zoom:50%;" />

根据原理图，点亮`LED1`需要设置`PA6`：`GPIO Output`，然后配置`GPIO`：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_LED03.png" alt="image-20251116142216285" style="zoom:50%;" />

配置完毕，**点击Generate**生成工程，可以在`gpio.c`文件的`void MX_GPIO_Init(void)`查看具体内容。



## 2、<span style="color:brown">HAL函数：</span>

**2.1、设置GPIO输出电平：**

````c
void HAL_GPIO_WritePin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);
````

| 参数名     | 类型            | 含义与取值                                                   |
| ---------- | --------------- | ------------------------------------------------------------ |
| `GPIOx`    | `GPIO_TypeDef*` | <span style="color:red">GPIO 端口号</span>（如 GPIOA 等）    |
| `GPIO_Pin` | `uint16_t`      | <span style="color:red">GPIO 引脚号</span>（如GPIO_PIN_6）   |
| `PinState` | `GPIO_PinState` | <span style="color:red">输出电平状态</span>： <br>- `GPIO_PIN_SET`：输出高电平（逻辑 1）； <br/>- `GPIO_PIN_RESET`：输出低电平（逻辑 0）。 |

**2.2、毫秒级延时：**

```c
void HAL_Delay(uint32_t Delay);
```

| 参数名  | 类型       | 含义与取值                                          | ❗注意                                                     |
| ------- | ---------- | --------------------------------------------------- | --------------------------------------------------------- |
| `Delay` | `uint32_t` | 延时时间，单位为`ms`<br/>取值范围：`0 ~ 0xFFFFFFFF` | `HAL_Delay`函数，依赖中断：`Time base: System tick timer` |

**2.3、控制输出电平翻转：**

````c
void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);
````



## 3、<span style="color:brown">功能实现：</span>

**3.1、单个LED：**

````c
// ================= 方式1 =================
HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, GPIO_PIN_RESET);
HAL_Delay(1000);
HAL_GPIO_WritePin(GPIOA, GPIO_PIN_6, GPIO_PIN_SET);
HAL_Delay(1000);
// ================= 方式2 =================
HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_6);
HAL_Delay(1000);
````

**3.2、多个LED：**

在`STM32CubeMX`配置其余LED的引脚，并生成工程：

````c
// ================= 方式1 =================
AL_GPIO_WritePin(GPIOA, LED3_Pin|LED2_Pin|LED1_Pin, GPIO_PIN_RESET);
HAL_Delay(1000)
AL_GPIO_WritePin(GPIOA, LED3_Pin|LED2_Pin|LED1_Pin, GPIO_PIN_SET);
HAL_Delay(1000)
// ================= 方式2 =================
HAL_GPIO_TogglePin(GPIOA, LED3_Pin|LED2_Pin|LED1_Pin);
HAL_Delay(1000);
````

**3.3、流水灯：**

````c
// ================= 方式1 =================
HAL_GPIO_WritePin(GPIOA, LED3_Pin, GPIO_PIN_RESET);
HAL_Delay(500);
HAL_GPIO_WritePin(GPIOA, LED3_Pin, GPIO_PIN_SET);
HAL_GPIO_WritePin(GPIOA, LED2_Pin, GPIO_PIN_RESET);
HAL_Delay(500);
HAL_GPIO_WritePin(GPIOA, LED2_Pin, GPIO_PIN_SET);
HAL_GPIO_WritePin(GPIOA, LED1_Pin, GPIO_PIN_RESET);
HAL_Delay(500);
HAL_GPIO_WritePin(GPIOA, LED1_Pin, GPIO_PIN_SET);
// ================= 方式2 =================
HAL_GPIO_TogglePin(GPIOA, LED3_Pin);
HAL_Delay(500);
HAL_GPIO_TogglePin(GPIOA, LED3_Pin);
HAL_GPIO_TogglePin(GPIOA, LED2_Pin);
HAL_Delay(500);
HAL_GPIO_TogglePin(GPIOA, LED2_Pin);
HAL_GPIO_TogglePin(GPIOA, LED1_Pin);
HAL_Delay(500);
HAL_GPIO_TogglePin(GPIOA, LED1_Pin);
````


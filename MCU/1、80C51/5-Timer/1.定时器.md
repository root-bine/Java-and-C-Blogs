## 1、<span style="color:brown">Timer概述：</span>

**1.1、简介：**

定时器，是**用来控制时间**，可以根据**设定的时间间隔**，准时产生**触发信号**，用于**控制程序的执行流程**。

`51`单片机有两个定时器：`Timer0`、`Timer1`。

`T0`和`T1`可以**配置寄存器**，来实现<span style="color:red">**定时和计数**</span>功能。

**1.2、问题引入：**

之前使用**软件空转延时方式**（`void delay_ms(unsigned int xms)`），让`CPU`通过**不停的计数来消耗时间**。

但该方式有弊端，就是<span style="color:red">当`CPU`空转延时的时候，无法做其他事情</span>。

**1.3、中断系统结构&寄存器表：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Timer01.png" alt="image-20250915150552517" style="zoom:50%;" />

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Timer02.png" alt="image-20250915150809496" style="zoom:50%;" />



## 2、<span style="color:brown">定时器/计数器：</span>Timer0、Timer1

**2.1、相关寄存器Table：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Timer03.png" alt="image-20250915151355462" style="zoom: 67%;" />

**2.2、工作模式分类：**

`STC89C52RC/RD+`的`T0`、`T1`有**4种工作模式**：

| Mode_Name                                        |        Explanation         |                      Description                       |
| :----------------------------------------------- | :------------------------: | :----------------------------------------------------: |
| 模式0                                            |      **13位**`Timer`       |                  适用于**短时间**计时                  |
| **模式1**（<span style="color:red">常用</span>） |      **16位**`Timer`       |                 适用于**较长时间**计时                 |
| 模式2                                            | **8位自动重装模式**`Timer` | 计时到设定值后，会自动重新开始计时，实现周期性计时功能 |
| 模式3                                            |       两个8位`Timer`       |      禁用`Timer1`，把`Timer2`设置为两个8位`Timer`      |

除开**模式2**，其他模式均需要<span style="color:red">在**触发溢出中断**后，**重新配置**预装载值</span>。

**2.3、TMOD说明：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Timer04.png" alt="image-20250915152218319" style="zoom:67%;" />

该寄存器用于**决定使用`Timer0/Timer1`**、**确定具体的工作模式**。

**2.4、TCON说明：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Timer06.png" alt="image-20250915160640178" style="zoom:50%;" />

`TR0/TR1`决定`Timer`开始计数。

`TF0/TF1`由**硬件**设置，**触发中断溢出**时，自动置为`1`。

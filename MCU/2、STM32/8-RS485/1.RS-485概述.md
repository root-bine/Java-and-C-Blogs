## 1、<span style="color:brown">基础介绍：</span>

**1.1、概述：**

`RS-485`是一种<span style="color:green">差分式、半双工、多点总线</span>的<span style="color:red">串行通信</span>接口标准，<span style="color:purple">是一种电气标准，并非协议</span>：

|   特性   |      UART & USART       |         RS-485         |
| :------: | :---------------------: | :--------------------: |
| 硬件线路 |       TX, RX, GND       |        A线, B线        |
| 通信拓扑 | 异步的、**点对点**总线❗ | 异步的、**多点**总线❗  |
| 数据传输 | **全双工**，LSB-First❗  | **半双工**，LSB-First❗ |

**1.2、对比：**

`RS-485`比`UART & USART`更强，原因在于：

1. **差分传输**具有很强的**抗干扰性**；
2. 能够**远距离传输**；
3. 使用`32`节点的**多点通信**；

**1.3、多机通信：**

`RS-485`具备<span style="color:red">**32节点**总线结构</span>，允许**多个设备**挂在**同一根 A/B 线**上：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_RS485_01.png" alt="image-20251127191230698" style="zoom:40%;" />

✅<span style="color:red">只能一个设备发，其他设备接收</span>，若多个设备同时发送就会**导致总线冲突**，并**产生数据错乱**。



## 2、<span style="color:brown">SP3485芯片：</span>

**2.1、场景说明：**

`STM32`**没有硬件485接口**，所以通常使用**485收发器**将<span style="color:red">`UART`的`TTL`电平</span>转换成<span style="color:red">`RS485`的差分信号</span>：

- 通过`TxD`发送数据，经**485收发器**转换成**差分信号**，传输到总线上；
- 通过`RxD`接收数据，**485收发器**将总线上的**差分信号**转化成**TTL信号**；

**2.2、引脚说明：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_RS485_02.png" alt="image-20251127200435750" style="zoom: 67%;" />

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32_RS485_03.png" alt="image-20251127193016411" style="zoom:50%;" />

`DE`控制`DI -> 485_TXD`：1 发送使能，0 发送禁止。

`RE`控制`RO -> 485_RXD`：1 接收禁止，0 接收使能。

`MCU`发送数据：控制`CTRL`为`HIGH_LEVEL`，数据通过`485_TXD`**发送**出去。

`MCU`接收数据，控制`CTRL`为`LOW_LEVEL`，数据通过`485_RXD`**接收**回来。


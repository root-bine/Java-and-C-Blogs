## 1、<span style="color:brown">BL24C02芯片：</span>

**1.1、EEPROM：**

`EEPROM` (`Electrically Erasable Programmable read only memory`)：

| <span style="color:red">带电可擦可编程</span>存储器 | 掉电后，<span style="color:red">数据不丢失</span> |
| :-------------------------------------------------: | :-----------------------------------------------: |

**BL24C02**是一个**2 Kbit**的`EEPROM`， 存储数据空间大小：`256 byte`（总共有`32`页，每页`8 Byte`）。

**1.2、引脚说明：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/EEPROM_01.png" alt="image-20251201194431733" style="zoom:67%;" />

✅在实验板卡原理图中，`A0`、`A1`、`A2`接`GND`，那么芯片地址：

- 写数据时，设备地址字节应该是`0b1010 0000 = 0xA0`；

- 读数据时，设备地址字节应该是`0b1010 0001 = 0xA1`；



## 2、<span style="color:brown">BL24C02控制：</span>

**2.1、原理图：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/EEPROM_02.png" alt="image-20251201194811135" style="zoom:40%;" />

`EEPROM`使用**GPIO引脚**：`PB7`、`PB6`，根据`GPIO`重映射：

![image-20251201195035439](https://raw.githubusercontent.com/root-bine/image/main/Typora-image/EEPROM_03.png)

✅因此，`BL24C02`可以使用`I2C1`进行操控。

**2.2、功能实现：**

```C
#include <stdio.h>

#define ADDR_24LCxx_Write 0xA0
#define ADDR_24LCxx_Read 0xA1
#define BufferSize 8
uint8_t WriteBuffer[BufferSize] = {1,2,3,4,5,6,7,8};
uint8_t ReadBuffer[BufferSize] = {0};

while (1){
	printf("start to test i2c eeprom\n");
    if(HAL_I2C_Mem_Write(&hi2c1, ADDR_24LCxx_Write, 0, I2C_MEMADD_SIZE_8BIT, WriteBuffer, 			 sizeof(WriteBuffer), 0xff) == HAL_OK){
        printf("EEPROM 24C02 Write Test OK \r\n");
    }
    HAL_Delay(10);           
    /* read date from EEPROM */
    HAL_I2C_Mem_Read(&hi2c1, ADDR_24LCxx_Read, 0, I2C_MEMADD_SIZE_8BIT, ReadBuffer, sizeof(ReadBuffer), 0xff);
    for(int i = 0; i < sizeof(ReadBuffer); i++){
       printf("0x%02X  ",ReadBuffer[i]);
    }
    HAL_Delay(1000);
}

int fputc(int ch, FILE *f) {
    HAL_UART_Transmit(&huart1 , (uint8_t *)&ch, 1, 0xFFFF);
    return ch;
}
```

# 超文本传输协议

## 1、<span style="color:brown">基础内容：</span>

**1.1、HTTP协议：**

定义了客户端端和服务器端，在通信时**传输信息的格式**，其特点：

- 基于TCP/IP的高级协议

- 默认端口号：80

- 基于<span style="color:violet">请求-响应模型</span>：

  ```scss
  一次请求对应一次响应
  ```

- **无状态的**

  ```scss
  每次请求之间相互独立, 不能交互数据
  ```

**1.2、超文本的含义：**

```scss
1. 超文本, 即: '超级文本' / '带超链接文本', 例如: 图片、动图、文字、视频...

2. 对于这些内容, 有统一的访问路径, 称之为'URL地址'
```

**1.3、可靠性的基础：**

```scss
1. HTTP协议是可靠的数据传输协议, 依赖于'传输层的TCP协议来实现的'

2. HTTP协议的底层是'通过TCP协议的可靠性, 从而保证HTTP协议的可靠性'
```



## 2、<span style="color:brown">HTTP报文：</span>

**2.1、什么HTTP报文？**

在客户端和服务端之间传送的**数据块**

**2.2、HTTP报文的组成：**

HTTP报文由：起始行（start line）、头部（header）和主体（body）三部分组成；

- 起始行：对报文进行的描述；

- 头部：报文的一些属性；

- 主体：报文的数据；

**2.3、分类：**

1. **请求报文：**

   ```scss
   1. 请求行: 请求方法、URI、HTTP版本信息
   2. 请求头部
   3. 空行
   4. 请求体: 请求数据
   ```

2. **响应报文：**

   ```scss
   1. 状态行：状态码、状态码的原因
   2. 响应头部
   3. 空行
   4. 响应体: 响应数据
   ```



## 3、<span style="color:brown">HTTP版本：</span>

**3.1、http1.0：**

1. **TCP连接不可复用**，且一个TCP连接只能发送一次请求，当服务器响应后，就会关闭这次连接；
2. 每次请求都需要重新建立TCP连接（三次握手），影响发送速率；
3. 后面提供了一个**非标准字段Connection字段**来实现`长连接`；

**3.2、http1.1：**

1. **实现了长连接**，即：TCP连接默认不关闭，允许被多个请求复用，不用申明`Connection: keep-alive`；
2. **提供管道机制**，即：一个TCP连接中，允许多个请求同时发送，增加并发性；
   - 由于<span style="color:green">服务器还是根据得到请求的先后顺序去进行响应</span>，这种机制容易造成<span style="color:red">队头阻塞</span>。
3. 请求头**新增host字段**，用来处理服务器存在多个虚拟主机的情况

**3.3、http2.0：**

1. **增加双工模式**，即：不仅客户端能够同时发送多个请求，服务端也能同时处理多个请求；
   - <span style="color:blue">解决了队头堵塞的问题</span>；
2. **服务器推送功能**，当我们对支持HTTP2.0的web server请求数据的时候，服务器会顺便把一些客户端需要的资源一起推送到客户端，免得客户端再次创建连接发送请求到服务器端获取；
3. 支持二进制帧的格式来传递报头和数据；



## 4、<span style="color:brown">HTTP 和 HTTPS 的区别：</span>

**4.1、端口：**

- HTTP的URL由`http://”起始且默认使用端口80`
- HTTPS的URL由`https://”起始且默认使用端口443`

**4.2、安全性和资源消耗：**

- HTTP协议<span style="color:purple">**运行在TCP之上**</span>：
  - 所有传输的内容都是明文，客户端和服务器端都无法验证对方的身份。
- HTTPS是运<span style="color:violet">**行在SSL/TLS之上的HTTP协议，SSL/TLS 运行在TCP之上**</span>：
  - **所有传输的内容都经过加密，加密采用对称加密**，但*对称加密的密钥，**用服务器生成的证书进行非对称加密***。

总之：<span style="color:red">**HTTP 安全性没有 HTTPS高，但是 HTTPS 比HTTP耗费更多服务器资源！！**</span>

**4.3、加密：**

1. **对称加密**：加密解密使用同一个密钥
   - 这种加密方式的优点是**加密解密效率高**，但是当密钥被窃取时，就会存在安全问题。
   
   - 常见的算法有：AES、DES。
   
2. **非对称加密**：密钥分为公钥和私钥，使用公钥来加密数据，使用私钥来解密数据

   - 安全性相对较高，但是**加解密的效率会更低**。
   - 常用的算法有：RSA等。
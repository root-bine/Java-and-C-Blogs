## 1、<span style="color:brown">触控按键：</span>

**1.1、原理图：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Button04.png" alt="image-20250911160224829" style="zoom:50%;" />

`QC`连接芯片的**`P4 IO`端口**，即：`P4.3`。

| IO端口 |                   引脚                    |
| :----: | :---------------------------------------: |
|   P4   | `P4.0, P4.1, P4.2, P4.3`，复位值：`1111B` |

**1.2、PT2041AT6数据手册：**

> `PT2041AT6`，是一种**单通道触摸检测**芯片

在[立创商城](https://www.szlcsc.com/?c=Q2&msclkid=85859f04a7d610fa116ff7c6258add7d&lcsc_vid=ElhZUQVWQQAIUABURANWBgJQFVhcUwEHRlRfX1NQE1kxVlNTQFRZUFxURVVcVzsOAxUeFF5JWAIASQYPGQZABAsLWA%3D%3D)，查找**`PT2041AT6`芯片**的`datasheet`：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Button05.png" alt="image-20250911160627739" style="zoom: 67%;" />



## 2、<span style="color:brown">按键控制：</span>

**2.1、原理解析：**

综合`PT2041AT6`的**原理图**、**数据手册**：

| `TOG`接`GND`，电平为`LOW_LEVEL` | `AHLB`接`3.3 V`，电平为`HIGH_LEVEL` |
| ------------------------------- | ----------------------------------- |

因此，`QC`的**特性**：

- <u>同步模式、CMOS<span style="color:red">低电平有效</span></u>；
- <span style="color:red">默认为`HIGH_LEVEL`，按下`Touch Button`，电平为`LOW_LEVEL`</span>；

**2.2、P4 IO问题解决：**

在`Keil`创建项目时，选择芯片为`AT89C52`，实验使用`IC`厂商为`STC`，并非`AT`！因此`#include <reg52.h>`**没有`P4 IO`端口定义**！！

因此，需要结合`datasheet`，手动定义`P4 IO`口：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/Button06.png" alt="image-20250911165057947" style="zoom:50%;" />

**2.3、功能实现：**

```c
#include <reg52.h>
void delay_ms(unsigned int xms);
sfr  P4   = 0xE8; // Keil选择的是AT89C52, 实验IC为STC, 自定义创建P4 IO
sbit KEY4 = P4 ^ 3;
sbit LED1 = P2 ^ 7;
void main() {
	while(1) {
		if(KEY4 == 0) {
			LED1 = ~LED1;
			delay_ms(1000); // 防止按键被重复触发
		}
	}
}
```


## 1、<span style="color:brown">工程目录：</span>

**1.1、MDK-ARM：**

````ABAP
├─ 【MDK-ARM/】               
│     ├─ startup_stm32xxxx.s #STM32芯片汇编启动文件：初始化堆栈、中断向量表, 执行SystemInit(), 最终跳转至main()
````

修改`Stack`、`Heap`数值：

1. 打开`STM32CubeMX`，在`Project Manager -> Project -> Linker Settings`：
   - 设置堆大小：Minimum Heap Size；
   - 设置栈大小：Minimum Stack Size；
2. 在`startup_stm32xxxx.s`，直接设置`Stack_Size`、`Heap_Size`；

**1.2、Drivers：**

````ABAP
├─ 【Drivers/】              # 官方 HAL 库和 CMSIS 内核支持
│  ├─ 【STM32xxxx_HAL_Driver/】 # HAL库实现
│  │  ├─ 【Inc/】            # HAL 头文件
│  │  └─ 【Src/】            # HAL 源文件
│  │
│  └─ 【CMSIS/】             # ARM 内核支持: 统一内核接口标准
│      └─ system_stm32f1xx.c # 系统时钟配置文件, 定义"SystemInit() 函数（复位后初始化）"和"时钟树配置相关函数"
````

**1.3、Core：**✅

````ABAP
├─ 【Core/】                 # 核心代码文件夹: 用户主要开发目录
│     ├─ main.c              # 主程序入口: 包含 main() 函数
│     ├─ stm32xxxx_hal_msp.c # MSP配置文件: 存放芯片层初始化代码
│     ├─ stm32xxxx_it.c      # 中断源文件: 实现中断处理函数，用到"中断功能修改"
│     └─ gpio.c              # 外设源文件: 按配置的外设自动生成
````

代码编程中，主要<span style="color:red">修改</span>**main.c函数**。

**1.4、CMSIS HAL：**

```ABAP
└─ CMSIS HAL库依赖CMSIS实现，用户无需修改。  
```

`CMSIS`是`Cortex Microcontroller Software Interface Standard`的缩写，是 `ARM` 统一的**Cortex微控制器软件接口标准**。

依赖关系说明：`CMSIS`  ------> `HAL`库  ------> 业务逻辑

  

## 2、<span style="color:brown">核心文件：</span>

**2.1、main.c：**

```C
#include "main.h"
#include "gpio.h"
int main(void) {
  HAL_Init(); //HAL库初始化
  SystemClock_Config(); //时钟初始化
  MX_GPIO_Init(); //GPIO初始化
  while (1) {}
}
```

**2.2、gpio.c：**

> 示例代码是LED配置信息

```C
void MX_GPIO_Init(void) {
  GPIO_InitTypeDef GPIO_InitStruct = {0};
  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOD_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, GPIO_PIN_SET);

  /*Configure GPIO pin : PtPin */
  GPIO_InitStruct.Pin = LED1_Pin;              
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;  // 推挽输出
  GPIO_InitStruct.Pull = GPIO_PULLUP;          // 上拉
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW; // 低速
  HAL_GPIO_Init(LED1_GPIO_Port, &GPIO_InitStruct);
}
```


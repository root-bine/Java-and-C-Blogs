## 1、<span style="color:brown">Jlink安装：</span>

**1.1、驱动安装：**

安装**Jlink驱动程序**：`JLink_V8_84.exe`，注意以下几点：

- 安装过程中勾选：`Add shortcuts to desktop`；

- 更新编程环境软件相应的**DLL文件**：

  <img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_11.png" alt="image-20251110190609586" style="zoom: 67%;" />

安装完毕后，桌面会显示两个应用程序：JFlash V5.12、JLink V5.12

| J-Flash V8.84 | J-Link Commander V8.84 |
| :-----------: | :--------------------: |
|   下载程序    |        控制程序        |

**1.2、驱动不识别：**

安装`JLink_V5_12.exe`成功后，打开**设备管理器 -> 通用串行总线控制器**，显示：<span style="color:red">`J-Link`驱动异常</span>。

解决方法：

- windows设置 -> 隐私和安全 -> windows安全中心 -> 设备安全性 -> 内核隔离；
- 关闭**内存安全性**；

**1.3、J-Link连线：**

````
J-Link                   板卡

GND     <------->        GND

SWDIO   <------->       SWDIO

SWCLK   <------->       SWCLK 

3V3     <------->        3V3
````

**J-Link的3.3 V引脚**是**为板卡供电**的，实验板卡采用<span style="color:red">外部供电方式</span>，因此**可以不接3.3 V**。



## 2、<span style="color:brown">Keil uVision5配置：</span>

**2.1、选择烧录器：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_12.png" alt="image-20251110194107897" style="zoom:50%;" />

<span style="color:red">如果**弹出是否更新ST-Link窗口**，请选`No`</span>，否则可能会使ST-LINK固件损坏。

**2.2、设置烧录方式：**

根据`STM32CubeMX`创建`Project`时，设置的**烧录调试模式**：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_13.png" alt="image-20251110194533117" style="zoom: 50%;" />

在`SWD`一栏**显示设备信息**，说明设置成功！！！

**2.3、配置Download：**

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_14.png" alt="image-20251110194845266" style="zoom:50%;" />

选中**Flash Download窗口**，设置：

1. 勾选`Reset and Run`；

2. 若**programming algorithm窗口**没有数据，需要手动**点击ADD**添加：

   |                  芯片型号                   |     归类     |   Flash    |
   | :-----------------------------------------: | :----------: | :--------: |
   |        `STM32F103x4`、`STM32F103x6`         |  小容量产品  | `<= 32 K`  |
   |        `STM32F103x8`、`STM32F103xB`         | 中等容量产品 | `<= 128 K` |
   | `STM32F103xC`、`STM32F103xD`、`STM32F103xE` |  大容量产品  | `>= 256 K` |



## 3、<span style="color:brown">烧录固件：</span>

**3.1、烧录工程：**

使用`Keil uVision5`进行烧录，显示如下界面，说明烧录成功：

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/STM32CubeMX_15.png" alt="image-20251110205202036" style="zoom:50%;" />

**3.2、烧录Fail：**

点击`Download`，提示`the firmware of the connected J-Link does not support the following memory access`，解决方法：

- 下载最新的`J-Link`：[SEGGER - The Embedded Experts - Downloads - J-Link / J-Trace](https://www.segger.com/downloads/jlink/#J-LinkSoftwareAndDocumentationPack)；

- 复制以下文件到`Keil`的`Core\ARM\Segger`：
  - `J-Link`：`USBDriver`、`JLink.exe`、`JLinkARM.dll`；
  - 替换`Keil`的`JL2CM3.dll`；

